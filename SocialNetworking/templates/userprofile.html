<!DOCTYPE html>
<html ng-app="profile_app">
<head>
 {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href=" {% static "css/style.css" %}">
    <script src="{% static "js/jquery-1.4.2.min.js"%}"></script>
    <script src="{% static "js/angular.min.js"%}"></script>
    <link href="{%static "css/bootstrap.min.css" %}" rel="stylesheet">
    <script src="{% static "js/angular-bootstrap.js" %}"></script>
    <script src="{% static "js/profile.js"%}"></script>
    <script src="{% static "jqchat.js"%}"></script>

    <title>{{ owner.username }}'s Profile</title>

</head>

 <div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="/">Social Network</a>
      <div class="nav-collapse pull-right">
            <form name="searchForm"class="navbar-search pull-right">
                <input type="text" name="searchterm" id="searchterm" placeholder="Search People" class="input-medium search-query"ng-model="selected" typeahead="u.fields.username for u in users | filter:$viewValue | limitTo:4">
                <button onclick="getProfile(searchterm.value)"class="search-query btn btn-success">Search</button>
            </form>

      </div><!-- /.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div>
<body ng-controller="profileController">
    <input type="hidden" id="owner"   value="{{owner.username}}">

    <button class="btn" ng-click="home()"><i class="icon-home"></i> Home</button>
    <h1> {{ owner.username }}'s Profile</h1>

    {% if visitor == None %}
         <h3> Please Login before messaging</h3>

    {% else %}
        <script> var owner = "{{ owner.username }}";var visitor = "{{ visitor.username }}"</script>
        <button onclick="create(owner,visitor)" class="btn btn-success">Message me</button>


<!--<div id="chatwindow"><span id="loading">Loading...</span></div>
 <form id="chatform">
	<label for="msg">Message:</label>
	<input type="text" id="msg" />
	<input type="submit" value="Send message" /><br />
</form>
-->

<div id="index_reload" class="index_reload">
    <!--index_reload-->
    <div id="chat_area" name="chat_area">
    <div class="chat_box main_chat1" id="chat_id1">
        <!--chat_box-->
        <div class="user_box">
            <div id="userChat"class="name open_chat1 left">Test</div>
            <div class="closed1 right">x &nbsp;</div>
            <div class="clear"></div>
        </div>
        <div id ="wrapbox"class="wrap_box1">
            <!--wrap_box-->
            <div id="message_content" class="message_content">
                <!--message_content-->
                <div id="reply_output">
                    <div class="message_post">
                       <div class="message_text left" id="chatwindow"><span id="loading">Loading...</span></div>
                        <div class="clear"></div>
                    </div>

                </div>
            </div>
            <!--message_content-->
            <div name="box_reply" class="box_reply">
                <form id="chatform">
                     <input type="text" id="msg" />
	                <input type="submit"  class="btn-primary"value="Send" />
                </form>
            </div>
        </div>
        <!--wrap_box-->
    </div>

    <!--chat_box-->





    <!--chat_box-->
</div>
</div>

<script type="text/javascript">document.getElementById("msg").focus();
</script>
    {% endif %}




<div class="navbar navbar-fixed-bottom">
    <div class='navbar-inner'>
    <div class='container-fluid'>
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    <ul class='nav nav-collapse collapse pull-right'>
        <li class="nav-list">
                Copyright 2013 Â©
        </li>
    </ul>
    </div>
   </div>
</div>
<script>
    $(document).ready(function () {


     //$("#msg").attr({ scrollTop: $("#msg").attr("scrollHeight") });
    // $("#wrapbox1").attr({ scrollTop: $("#wrapbox1").attr("scrollHeight") });
    //  $("#message_content").animate({ scrollTop: $("#message_content")[0].scrollHeight}, 1000);
       var divTop = $('#message_content').height();
    // scroll chat div
    $('#message_Content').stop().animate({"top": divTop }, 500, "swing");
    // screen follow chat div
    $('html, body').animate({ scrollTop: divTop }, 'slow');
    });
</script>
</body>
</html>